(()=>{"use strict";class e{constructor(e,t,i,s,r){this.img=e,this.title=t,this.desc=i,this.pricePerOne=s,this.id=r,this.qtt=1}isEqual(e){return this.id==e.id}getImg(){return this.img}getTitle(){return this.title}getDesc(){return this.desc}getPricePerOne(){return this.pricePerOne}getID(){return this.id}getQtt(){return this.qtt}setQtt(e){this.qtt=e}getTotalPrice(){return this.qtt*this.pricePerOne}makeHtmlElement(){const e=document.createElement("div");e.classList.add("cartline"),e.setAttribute("attr-id",this.id);const t=document.createElement("div");t.classList.add("delete-cartitem");const i=document.createElement("i");i.classList.add("fa-solid"),i.classList.add("fa-xmark"),t.appendChild(i);const s=document.createElement("div");s.classList.add("item-details-wrapper");const r=document.createElement("div");r.classList.add("item-img");const c=document.createElement("img");c.setAttribute("src",this.img),c.setAttribute("alt",this.title),r.appendChild(c);const a=document.createElement("div");a.classList.add("item-text");const l=document.createElement("h4");l.innerHTML=`<span class='qtt'>${this.qtt}</span>x ${this.title}`;const n=document.createElement("p");n.classList.add("desc"),n.innerText=this.desc,a.appendChild(l),a.appendChild(n),s.appendChild(r),s.appendChild(a);const o=document.createElement("p");return o.classList.add("total-price"),o.innerHTML=`<span>${this.getTotalPrice()} </span>₪`,e.appendChild(t),e.appendChild(s),e.appendChild(o),e}}class t{constructor(e,t,i,s,r){this.img=e,this.title=t,this.desc=i,this.price=s,this.id=r}getId(){return this.id}getImg(){return this.img}getTitle(){return this.title}getDesc(){return this.desc}getPrice(){return this.price}setImg(e){this.img=e}setTitle(e){this.title=e}setDesc(e){this.desc=e}setPrice(e){this.price=e}makeHtmlItem(){this.img,this.title,this.desc,this.price,this.id;const e=document.createElement("div");e.classList.add("item"),e.setAttribute("attr_img",this.img),e.setAttribute("attr_title",this.title),e.setAttribute("attr_desc",this.desc),e.setAttribute("attr_price",this.price),e.setAttribute("attr_id",this.id);const t=document.createElement("div");t.classList.add("item__img");const i=document.createElement("img");i.setAttribute("src",this.img),i.setAttribute("alt","item img"),t.appendChild(i),e.appendChild(t);const s=document.createElement("div");s.classList.add("item-details");const r=document.createElement("p");r.classList.add("item__title"),r.innerText=this.title;const c=document.createElement("p");c.classList.add("item__desc"),c.innerText=this.desc;const a=document.createElement("p");a.classList.add("item__price"),a.innerHTML=`<span>Price: </span>${this.price}₪`;const l=document.createElement("div");l.classList.add("add-to-cart-wrapper");const n=document.createElement("button");return n.classList.add("add-to-cart-btn"),n.innerText="Add",l.appendChild(n),s.appendChild(r),s.appendChild(c),s.appendChild(a),s.appendChild(l),e.appendChild(s),e}}const i=JSON.parse('{"e":[{"img":"https://www.pelephone.co.il/ds/uploadedimages/09_2022/iphone_14_pro_max_space_black.png","title":"iPhone 14 Pro Max","desc":"ה-iPhone המתקדם ביותר מסדרת ה-Pro מבית Apple בעל מסך Super Retina XDR פעיל תמיד בגודל 6.7 אינץ\' עם Dynamic Island, מצלמה ראשית חדשה ברזולוציה של 48MP עם חיישן בטכנולוגיית Quad-Pixel, שבב A16 Bionic החדש והמהיר ביותר, סוללה שמחזיקה ליום שלם וקישוריות 5G","price":5949},{"img":"https://img.ksp.co.il/item/214844/b_9.jpg?v=5","title":"Apple MacBook Pro","desc":"מחשב Apple MacBook Pro 13 M2 Chip 8-Core CPU, 10-Core GPU, 256GB SSD Storage, 8GB Unified Memory - צבע Space Gray - מקלדת ערבית / אנגלית","price":5390},{"img":"https://img.ksp.co.il/item/231074/b_1.jpg?v=5","title":"Apple iPad Pro","desc":"אייפד Apple iPad Pro 2022 12.9\'\' 256GB WiFi + Cellular - צבע Space Gray","price":5499},{"img":"https://hotstore.hotmobile.co.il/media/catalog/product/cache/ed1d7868e96e8a14b52484275e157b17/m/i/midnight.png","title":"Apple iPhone 13 128GB","desc":"האייפון 13 החזק והעוצמתי מבית Apple, בעל מסך 6.1 אינטש Super Retina XDR OLED, עם חיישן זיהוי פנים, מעבד ראשי A15 Bionic, שתי מצלמות אחוריות 12 מגה פיקסל, מצלמת סלפי 12 מגה פיקסל, בעל תקן IP68 עמיד בפני אבק ומים עם אפשרות טעינה אלחוטית ותמיכה ברשת הדור החמישי 5G ערכה סגורה ומקורית הכוללת כבל טעינה מקורי יש אפשרות לרכישת ראש מטען מקורי","price":2790},{"img":"https://img.ksp.co.il/item/54618/b_3.jpg?v=5","title":"Apple Pencil","desc":"עט Apple Pencil (2nd Generation) - דור שני","price":579},{"img":"https://eadn-wc05-4165754.nxedge.io/cdn/pub/media/catalog/product/cache/0d7e15299f2e9c150ef66e46509ba14b/m/k/mk2a3_magic_keyboard_-_us_english.jpeg.webp","title":"Apple Keyboard","desc":"מקלדת בלוטות איכותית ומקורית מבית Apple בעיצוב מלא עם לוח מקשי ספרות בצד ימין, אופנתית ודקה במיוחד, מקשים אמינים וסוללת ליתיום נטענת בעלת ביצועים מרשימים ותואמת למגוון המוצרים של Apple","price":533},{"img":"https://eadn-wc05-4165754.nxedge.io/cdn/pub/media/catalog/product/cache/0d7e15299f2e9c150ef66e46509ba14b/i/m/imac_24-in_blue_4-port_pdp_image_position-1__wwen.jpg.webp","title":"Apple 24\'\' iMac","desc":"","price":6656},{"img":"https://img.ksp.co.il/item/124284/b_1.jpg?v=5","title":"Apple MacBook Air 13 M1","desc":"מחשב Apple MacBook Air 13 M1 Chip 8-Core CPU, 7-Core GPU, 256GB SSD Storage, 8GB Unified Memory - צבע Space Gray - מקלדת בעברית / אנגלית - דגם MGN63HB/A / Z124-HB-KIT","price":3990},{"img":"https://www.bug.co.il/images/site/products/6ab0539e-b8ec-4762-aa69-bfba05e62805.jpg","title":"Apple Watch","desc":"Series 7 GPS + Cellular 45mm Stainless Steel","price":1999},{"img":"https://hotstore.hotmobile.co.il/media/catalog/product/cache/a73c0d5d6c75fbb1966fe13af695aeb7/a/p/apple_watch_ultra_cellular_49mm_titanium_yellow_ocean_band_34fr_screen__usen_1.png","title":"Apple Watch Ultra","desc":"Apple Watch Ultra GPS+Cellular 49mm Titanium Case & Yellow Ocean Band","price":3495},{"img":"https://target.scene7.com/is/image/Target/GUEST_26b077cc-328b-4e67-9002-058217f812e3?wid=325&hei=325&qlt=80&fmt=pjpeg","title":"Temple of Khonshu Statue","desc":"Funko POP! Jumbo: Moon Knight - Temple of Khonshu Statue (Target Exclusive)","price":140},{"img":"https://img.fruugo.com/product/0/59/565054590_max.jpg","title":"Moon Knight - Mr. Knight Funko Pop!","desc":"Find out what really happens when Mr. Knight takes a vacation when you bring home this officially licensed Marvel Comics Moon Knight - Mr. Knight Funko Pop Vinyl Figure.","price":74}]}');document.querySelector(".open-close-cart").addEventListener("click",(()=>{document.querySelector(".cart-wrapper").classList.toggle("active"),document.querySelector(".catalog").classList.toggle("active")})),document.querySelector("main").style.height=window.innerHeight-document.querySelector("header").offsetHeight+"px";const s=new class{constructor(){this.items=[]}getItems(){return this.items}setItems(e){this.items=e}addItem(e){this.items.push(e),document.querySelector(".catalog").appendChild(e.makeHtmlItem())}};i.e.map(((e,i)=>{const r=new t(e.img,e.title,e.desc,e.price,i);s.addItem(r)}));let r=0;document.querySelectorAll(".catalog .item .item__img").forEach((e=>{r<e.offsetHeight&&(r=e.offsetHeight)})),document.querySelectorAll(".catalog .item .item__img").forEach((e=>{e.style.height=r+"px"}));const c=document.querySelector(".search-bar-wrapper input");c.addEventListener("input",(()=>{document.querySelectorAll(".item").forEach((e=>{e.querySelector(".item__title").innerHTML.toLocaleLowerCase().includes(c.value.toLocaleLowerCase())?e.classList.remove("unvisible"):e.classList.add("unvisible")}))}));const a=new class{constructor(){this.cartlines=[],this.numberOfItems=0,this.totalPrice=0}getCartlines(){return this.cartlines}getNumberOfItem(){return this.numberOfItems}getTotalPrice(){return this.totalPrice=this.calcTotalPrice(),this.getTotalPrice}setCartlines(e){this.cartlines=e}setNumberOfItems(e){this.numberOfItems=e}calcTotalPrice(){let e=0;return this.cartlines.forEach((t=>{e+=parseInt(t.getTotalPrice())})),e}isCartlineExist(e){for(let t=0;t<this.cartlines.length;t++)if(1==(this.cartlines[t].getID()==e.getID()))return!0;return!1}getCartlineByID(e){for(let t=0;t<this.cartlines.length;t++)if(this.cartlines[t].getID()==e)return this.cartlines[t];return null}addCartline(t){if(this.isCartlineExist(t)){const e=this.getCartlineByID(t.getID());e.setQtt(e.getQtt()+1),this.setNumberOfItems(this.getNumberOfItem+1)}else this.cartlines.push(new e(t.getImg(),t.getTitle(),t.getDesc(),t.getPricePerOne(),t.getID())),this.setNumberOfItems(this.getNumberOfItem+1);this.makeHtmlElement()}removeCartline(e){if(null!=this.getCartlineByID(e)){let t;for(this.getCartlineByID(e),t=0;t<this.cartlines.length&&e!=this.cartlines[t].getID();t++);this.cartlines.splice(t,1),0==this.cartlines.length&&(document.querySelector(".cart-wrapper").classList.toggle("active"),document.querySelector(".catalog").classList.toggle("active"))}this.makeHtmlElement()}makeHtmlElement(){const e=document.querySelector(".cart-box");e.innerHTML="",this.cartlines.forEach((t=>{e.appendChild(t.makeHtmlElement())})),document.querySelector(".cart-summary .total-price span").innerText=this.calcTotalPrice()}};a.makeHtmlElement(),document.querySelectorAll(".catalog .item").forEach((t=>{t.querySelector(".add-to-cart-btn").addEventListener("click",(()=>{const i=new e(t.getAttribute("attr_img"),t.getAttribute("attr_title"),t.getAttribute("attr_desc"),t.getAttribute("attr_price"),t.getAttribute("attr_id"));a.addCartline(i)}))})),setInterval((()=>{document.querySelectorAll(".cart-wrapper .cart-box .cartline").forEach((e=>{e.querySelector(".delete-cartitem").addEventListener("click",(()=>{a.removeCartline(e.getAttribute("attr-id"))}))}))}),100)})();